## コミットの打ち消し

このセクションでは、履歴を書き換えるコマンドと、そのコマンドを使う場面を学習します。

### コミットの仕組み

Gitのコミットは、それぞれ、その時点でのユニークなスナップショットです。 以下の情報が含まれています。

- リポジトリにある現在のオブジェクトへのポインタ
- コミット作者とメールアドレス（コンフィグレーションの設定から）
- コミットの日付と時間
- コミットメッセージ

![Gitの基本的なコミットの構造](../img/commit-and-tree.png)

他にも、それぞれのコミットには親コミットのコミットIDも含まれています。

![コミット同士の関係](../img/commit-parent.png)

画像ソース：Scott ChaconのProGit v2

### 安全な操作

Gitのデータ構造は整合性を提供しますが、分散的な性質があるため、特定の操作がすでに共有されたコミットに対してどんな影響を及ぼすかを意識しなければいけません。

その操作がリモート（公開コミットとも言われます）にプッシュされているコミットのコミットIDを変更するとしたら、操作の選択を十分に考慮しなければいけません。

#### 一般的なコマンドの注意事項

| コマンド             | 注意事項                    |
| ---------------- | ----------------------- |
| `revert`         | 新しいコミットを作成するため、比較的安全です。 |
| `commit --amend` | ローカルなコミットにのみ使ってください。    |
| `reset`          | ローカルなコミットにのみ使ってください。    |
| `cherry-pick`    | ローカルなコミットにのみ使ってください。    |
| `rebase`         | ローカルなコミットにのみ使ってください。    |

### コミットの打ち消し方法

ゲームを機能させるためには、`index.html` を間違った名前に変更したコミットを打ち消す必要があります。

> **注意**：コミットを打ち消す前に、同じコミットの他の変更が取り消されないかを確認しましょう。 `git show SHA` で、コミットの変更を確認できます。

1. 打ち消しを開始します。`git revert <SHA>`
2. コミットメッセージを入力します。
3. GitHubに変更をプッシュします。
