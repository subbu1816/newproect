## ローカルでのGitの作業

コマンドラインを使用して、Gitを現在のワークフローに簡単に統合できます。

### リポジトリのローカルコピーの作成

![リポジトリのクローン](../img/clone-diagram.png)

ローカルで作業する前に、リポジトリのクローンを作成する必要があります。

リポジトリをクローンするとき、そのリポジトリ内の履歴を含むすべてのコピーが作成されます。 これは、gitのような分散型バージョン管理システムのメリットの１つです。コミット履歴をレビューするために低速の集中型サーバにクエリする必要はなく、ローカルでクエリは高速に実行されます。

クラスのリポジトリを、あなたのローカルのパソコンにクローンしましょう。

1. GitHubのクラスのリポジトリの**Code**タブに移動します。
2. *Clone or download*をクリックします。
3. あなたのクリップボードに、*clone URL*をコピーします。
4. コマンドラインのアプリケーションを開きます。
5. GitHubからリポジトリの完全なコピーを取得します。`git clone <CLONE-URL>`
6. クローンが完了したら、クローンにより作成された新しいディレクトリに移動します。`cd <REPOSITORY-NAME>`

### 私たちのお気に入りの Gitコマンド　`git status`

```sh
$ git status
On branch main
Your branch is up-to-date with 'origin/main'.
nothing to commit, working tree clean
```

` git status `は、リポジトリの現在の状態とそれに含まれるファイルを確認するために、頻繁に使用するコマンドです。 現在のところ、masterブランチにいることが表示されています。すべてがorigin/masterに合わせて最新版になり、ワーキングツリーはクリーンです。

### ローカルでのブランチの使用

```sh
git branch
```

`git branch`と入力すると、ローカルのブランチの一覧が表示されます。

```sh
git branch --all
git branch -a
```

リモートブランチの読み取り専用のコピーを含むすべてのブランチを表示したい場合、`--all` のオプション、または、単に `-a` と追記します。

> `--all` および `-a` は、ブランチコマンドの実質的な同義語です。 Gitは、しばしば、文字数の多いオプションと文字数の少ないオプションを提供します。

### ブランチの切り替え

```sh
git switch <BRANCH-NAME>
```

オンラインで作成したブランチをチェックアウトするには、git switchとブランチの名前を入力します。 Gitは、そのブランチが切り替わったことを伝えるメッセージを表示し、かつ、同じoriginからのリモートブランチを追跡するように設定されます。

> ブランチ名の前に、`remotes/origin`を入力する必要はありません。ブランチ名のみで大丈夫です。 ブランチ名の前に`remotes/origin`を入力すると、分離されたHEAD状態になります。 後ほど詳しく学習しますが、今は、この状態が、あるべき状態ではないことを覚えておいてください。

[include](06a_activity_create_file.md ':include')

### 2 段階コミット

ファイルを作成した後、リポジトリの最初のスナップショットを作成します。 コマンドラインから作業する場合は、２段階コミットという概念に慣れておく必要があります。

![２段階コミット - パート１](../img/two-stage-commit-a.png)

ローカルで作業する場合、ファイルは、４つの状態のいずれかになります。 その状態は、untracked（未追跡）、modified（変更された）、staged（ステージされた）またはcommitted（コミットされた）です。

Untrackedファイルは、一度もコミットされていない新しいファイルです。

Gitはこれらのファイルを追跡し、3つの作業ツリーで、そのファイルと変更を整理して履歴を追跡します。 その３つの作業ツリーは、Working、Staging （インデックスとも言う）、およびHistoryです。 ファイルに変更を加えている時、その変更は作業ツリーで発生しているのです。

![２段階コミット - パート２](../img/two-stage-commit-b.png)

ファイルをバージョン管理に追加するには、個別の作業単位を表す一連のファイルを作成します。 この作業単位をステージングエリアに作成します。

![２段階コミット - パート３](../img/two-stage-commit-c.png)

組み立てた作業単位についてよければ、ステージングエリアのすべてのもののスナップショットを取得します。 このスナップショットを、コミットと呼びます。

![２段階コミット - パート４](../img/two-stage-commit-d.png)

ファイルをバージョン管理されたディレクトリの一部にするためには、最初にgit addを行い、次にgit commitを行います。 今すぐ、やってみましょう。

1. まず、作業ツリーの状態を確認しましょう。` git status `
2. ファイルを作業ツリーからステージングエリアに移動します。` git add my-file.md `
3. 移動したかどうかステータスを確認します。`git status`
4. それでは、最初のスナップショットを取得します。` git commit `
5. Gitがデフォルトのテキストエディタを開き、コミットメッセージを要求します ファイルの先頭行にメッセージを入力してください。 ＃が付いていない行のすべてが、コミットメッセージに含まれます。
6. コミットメッセージを保存して閉じます。
7. リポジトリのステータスをもう一度確認します。` git status `

> 優れたコミットメッセージは、

- 短いこと。 50文字以下が理想的です。
- コミットによって行われる変更を記述すること。
- プロジェクトの進捗状況について記載すること。
