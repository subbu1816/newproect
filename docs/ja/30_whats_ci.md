## CI/CDとは？

継続的インテグレーションと継続的デプロイメントのツールは、手動で行わなければいけないタスクを自動的に実行してくれます。

#### テストを実行する意味とは？ そして、CIを使用する意味とは？

- コードを自動的にテストします。
- 開発過程を標準化します。
- Test driven development (TDD)（テスト駆動開発）は、単なるランダムなテストの追加ではなく、テストをソフトウェアの必要条件として構築します。
- ビルドは、CIサービスによって、別々のサーバで行われます。
- 他の利点としては、一貫したコンフィグレーション、多数のテストの実行、「私のマシンなら動く」という現象の軽減などがあります。

#### CI/CDは、GitHubではどのように働くのでしょう？

- GitHubと一緒に使用することで、テストは、新しいコミットがある度にブランチと Pull Request に自動的に実行され、GitHubのAPIによりステータスを送ってもらうことができます。
- テストは、ソフトウェアのプロダクション環境に基づいた、一貫した環境で行われます。
- 保護されたブランチは、 Pull Request がテストに合格せずにマージされないよう、門番としての役割を果たすことができます。

![CI](../img/ci.png)

#### CIとCDの違いは？

- **CI：**継続的インテグレーション
  - 継続的インテグレーションとは、その場限りではなく、プッシュする度に、自動的にテストを実行する方法です。
- **CD：**継続的デプロイメント
  - カスタム条件により、自動的にデプロイメントされるコードです。
  - 継続的デプロイメントとは、継続的にプロダクションサーバにデプロイする方法です。 企業はCIと連動し、成功したビルドを1日に数回デプロイできる自由をディベロッパーに与えることで、CDモデルに移行することができます。 マージすること自体は、何らかのデプロイメント戦略（例えば、Herokuではmasterにマージされたものを自動的にデプロイします）と連携していない限り、CDとは言えません。
- このコースでは、CDよりCIの方に重点を置いています。
  - 概念は異なりますが、CIとCDは、同時に検討され、実装されることが多いです。
  - 通常、CIとCDは、多くのタスクがすでに定義されているため、同時に実装されます。 例えば、プロジェクトが、すでにテストの準備をし、デプロイメントの手順を用意している場合があります。 CI/CDのツールが導入されると、それらを同時に行うことが容易になります。

![CD](./img/cd.png)

#### 他の考慮すべき点

- 保護されたブランチ
  - GitHubでは、CI/CDを設置するとき、保護されたブランチを設定すると良いです。
  - 保護されたブランチは、CI/CDテストとビルドに合格していること、承認されたレビューがあることなど、設定した必要条件を満たさずに、リモートにあるmasterブランチにコードがマージされることを阻止します。
- 自動デプロイ
  - CI/CDでは、コードがmasterブランチのテストに合格したら、デプロイが自動的に実行されるように設定することができます。
  - 多くのインテグレーションがGitHubと連携できるのと同様に、多くのデプロイメントプラットフォームをCI/CDサービスと連携させることができます。
  - その１つの例がHerokuです。 Herokuでは、ビルドがmasterブランチのテストに合格する度に、Herokuへのデプロイメントが合理化され、自動的に処理されるよう、プロジェクトを設定できます。
